# Nyquist Frequency 쉬운 설명

## 영화 촬영 비유

### 카메라로 바퀴 회전 촬영하기

**상황:**
- 카메라: 1초에 24프레임 촬영 (24 fps)
- 자동차 바퀴: 1초에 회전하는 속도

**질문: 몇 바퀴/초까지 제대로 촬영할 수 있을까?**

```
1초에 24장 사진 촬영 가능
→ 한 바퀴를 촬영하려면 최소 2장 필요
  (시작 위치 1장 + 끝 위치 1장)
→ 최대 24÷2 = 12 바퀴/초까지 촬영 가능!
```

**실제 현상:**
- 12 바퀴/초 이하: 제대로 보임 ✅
- 12 바퀴/초: 정지한 것처럼 보임
- 12 바퀴/초 초과: 거꾸로 도는 것처럼 보임! ❌

이것이 바로 **Nyquist frequency**입니다!

---

## 우리 EMG 신호의 경우

**측정 장비:**
```
Sampling rate (fs) = 256 Hz
→ 1초에 256번 측정

Nyquist frequency = 256 ÷ 2 = 128 Hz
→ 최대 128 Hz 진동까지 정확히 측정 가능
```

**의미:**
```
✅ 60 Hz 전원 간섭: 감지 가능 (60 < 128)
✅ 100 Hz EMG 신호: 감지 가능 (100 < 128)
✅ 128 Hz: 경계선 (감지 가능하지만 위험)
❌ 150 Hz: 감지 불가 (150 > 128) → 잘못된 주파수로 보임
```

---

## 코드에서 왜 필요한가?

### 원래 주파수 → Normalized 변환

**scipy.signal.butter()의 규칙:**
- 입력: 0 ~ 1 사이의 숫자 (normalized frequency)
- 0 = DC (0 Hz)
- 1 = Nyquist frequency (측정 가능한 최대 주파수)

**변환 공식:**
```python
nyq = 0.5 * fs  # 최대 측정 가능 주파수 (128 Hz)

normalized = 실제주파수 / nyq
```

**예시:**
```python
fs = 256 Hz
nyq = 128 Hz

# 10 Hz를 normalized로 변환
10 / 128 = 0.078
→ "Nyquist의 7.8%"를 의미

# 100 Hz를 normalized로 변환
100 / 128 = 0.781
→ "Nyquist의 78.1%"를 의미

# signal.butter()에 전달
signal.butter(4, [0.078, 0.781], btype='band')
# → "최대값의 7.8%부터 78.1%까지 통과시키는 필터 만들어줘"
```

---

## 왜 이렇게 복잡하게?

**간단한 이유:** scipy 라이브러리가 그렇게 만들어졌기 때문!

다른 사람들도 똑같이 합니다:
```python
# 표준 패턴 (모든 사람이 이렇게 씀)
nyq = 0.5 * fs
low = cutoff_freq / nyq
b, a = signal.butter(order, low, btype='high')
```

---

## 결론

**`nyq = 0.5 * fs`의 의미:**

1. **물리적 한계**: 샘플링 속도로 측정 가능한 최대 주파수
2. **계산 이유**: 한 진동을 감지하려면 최소 2번 측정 필요
3. **코드 용도**: scipy에 0~1 범위로 정규화하기 위한 기준값

**우리가 알아야 할 것:**
- 256 Hz로 샘플링 → 최대 128 Hz까지 측정 가능
- EMG는 대부분 20-100 Hz → 안전 ✅
- nyq는 단지 normalization을 위한 나눗셈 기준값

끝!
